# EMQX 5.x Production Tunables - Double Underscore Convention, used in the 5.x version.
# Environment variables override HOCON configuration at runtime

# Node Configuration
EMQX_NODE__COOKIE=REPLACE_WITH_SECURE_COOKIE

# Dashboard Configuration  
EMQX_DASHBOARD__DEFAULT_USERNAME=REPLACE_WITH_USERNAME
EMQX_DASHBOARD__DEFAULT_PASSWORD=REPLACE_WITH_SECURE_PASSWORD

# Connection Management
EMQX_LISTENERS__TCP__DEFAULT__MAX_CONNECTIONS=1000000
EMQX_LISTENERS__TCP__DEFAULT__MAX_CONN_RATE=1000
EMQX_LISTENERS__TCP__DEFAULT__ACCEPTORS=16

EMQX_LISTENERS__SSL__DEFAULT__MAX_CONNECTIONS=1000000
EMQX_LISTENERS__SSL__DEFAULT__MAX_CONN_RATE=1000
EMQX_LISTENERS__SSL__DEFAULT__ACCEPTORS=16

EMQX_LISTENERS__WS__DEFAULT__MAX_CONNECTIONS=1000000
EMQX_LISTENERS__WS__DEFAULT__MAX_CONN_RATE=1000
EMQX_LISTENERS__WS__DEFAULT__ACCEPTORS=16

EMQX_LISTENERS__WSS__DEFAULT__MAX_CONNECTIONS=1000000
EMQX_LISTENERS__WSS__DEFAULT__MAX_CONN_RATE=1000
EMQX_LISTENERS__WSS__DEFAULT__ACCEPTORS=16

# MQTT Protocol Configuration
EMQX_MQTT__IDLE_TIMEOUT=15000
EMQX_MQTT__MAX_PACKET_SIZE=1MB
EMQX_MQTT__KEEPALIVE_MULTIPLIER=1.5
EMQX_MQTT__MAX_INFLIGHT=32
EMQX_MQTT__RETRY_INTERVAL=30000
EMQX_MQTT__MAX_AWAITING_REL=100
EMQX_MQTT__AWAIT_REL_TIMEOUT=300000
EMQX_MQTT__SESSION_EXPIRY_INTERVAL=7200000
EMQX_MQTT__MAX_MQUEUE_LEN=1000

# Performance Tuning
EMQX_FORCE_GC__COUNT=16000
EMQX_FORCE_GC__BYTES=16MB
EMQX_FORCE_SHUTDOWN__MAX_MAILBOX_SIZE=1000
EMQX_FORCE_SHUTDOWN__MAX_HEAP_SIZE=32MB
EMQX_OVERLOAD_PROTECTION__BACKOFF_DELAY=1000

# System Monitor
EMQX_SYSMON__VM__PROCESS_CHECK_INTERVAL=30000
EMQX_SYSMON__VM__PROCESS_HIGH_WATERMARK=80%
EMQX_SYSMON__VM__PROCESS_LOW_WATERMARK=60%
EMQX_SYSMON__VM__LARGE_HEAP=8MB

EMQX_SYSMON__OS__CPU_CHECK_INTERVAL=60000
EMQX_SYSMON__OS__CPU_HIGH_WATERMARK=80%
EMQX_SYSMON__OS__CPU_LOW_WATERMARK=60%
EMQX_SYSMON__OS__MEM_CHECK_INTERVAL=60000
EMQX_SYSMON__OS__SYSMEM_HIGH_WATERMARK=70%
EMQX_SYSMON__OS__PROCMEM_HIGH_WATERMARK=5%

# Authorization Cache
EMQX_AUTHORIZATION__CACHE__MAX_SIZE=32
EMQX_AUTHORIZATION__CACHE__TTL=60000

# Logging
EMQX_LOG__CONSOLE_HANDLER__LEVEL=info
EMQX_LOG__FILE_HANDLERS__DEFAULT__LEVEL=info
EMQX_LOG__FILE_HANDLERS__DEFAULT__ROTATION_SIZE=50MB
EMQX_LOG__FILE_HANDLERS__DEFAULT__ROTATION_COUNT=10

# Retainer
EMQX_RETAINER__MAX_PAYLOAD_SIZE=1MB
EMQX_RETAINER__BACKEND__MAX_RETAINED_MESSAGES=0

# Flapping Detection
EMQX_FLAPPING_DETECT__ENABLE=false
EMQX_FLAPPING_DETECT__MAX_COUNT=15
EMQX_FLAPPING_DETECT__WINDOW_TIME=1m
EMQX_FLAPPING_DETECT__BAN_TIME=5m